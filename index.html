<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bucket List</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #FDF8F3;
            --warm-white: #FFFBF7;
            --soft-peach: #FFE8D6;
            --dusty-rose: #E8B4B8;
            --sage: #A8C5A8;
            --muted-blue: #B8C5D6;
            --lavender: #D4C5E8;
            --warm-gray: #8B8178;
            --dark-brown: #4A4039;
            --gold: #C9A86C;
            --coral: #E8A598;
            --mint: #98D4C4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nanum Gothic', sans-serif;
            background: var(--cream);
            color: var(--dark-brown);
            min-height: 100vh;
            line-height: 1.6;
        }

        .admin-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, var(--dark-brown), #5A5049);
            color: white;
            padding: 8px 20px;
            display: none;
            justify-content: space-between;
            align-items: center;
            z-index: 1001;
            font-size: 0.85rem;
        }

        .admin-bar.active { display: flex; }
        .admin-bar span { display: flex; align-items: center; gap: 8px; }

        .admin-logout {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .admin-logout:hover { background: rgba(255,255,255,0.3); }
        body.admin-mode { padding-top: 40px; }

        .loading-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--cream);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden { opacity: 0; pointer-events: none; }

        .loading-spinner {
            width: 50px; height: 50px;
            border: 3px solid var(--soft-peach);
            border-top-color: var(--dusty-rose);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text { margin-top: 20px; color: var(--warm-gray); font-size: 0.9rem; }

        @keyframes spin { to { transform: rotate(360deg); } }

        header {
            background: linear-gradient(135deg, var(--soft-peach) 0%, var(--warm-white) 100%);
            padding: 50px 20px 70px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 60%);
            animation: shimmer 15s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(10%, 10%) rotate(5deg); }
        }

        .header-content { position: relative; z-index: 1; }

        h1 {
            font-family: 'Gowun Batang', serif;
            font-size: clamp(2rem, 8vw, 3.2rem);
            font-weight: 700;
            color: var(--dark-brown);
            margin-bottom: 8px;
            letter-spacing: 2px;
        }

        .subtitle { font-size: 0.95rem; color: var(--warm-gray); margin-bottom: 25px; }

        .progress-container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255,255,255,0.85);
            border-radius: 20px;
            padding: 18px 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .progress-stats { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.85rem; }

        .progress-bar { height: 8px; background: var(--cream); border-radius: 10px; overflow: hidden; }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage), var(--dusty-rose));
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
        }

        .admin-login-btn {
            position: absolute;
            top: 20px; right: 20px;
            background: rgba(255,255,255,0.7);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            color: var(--warm-gray);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .admin-login-btn:hover { background: rgba(255,255,255,0.9); color: var(--dark-brown); }
        .admin-login-btn.logged-in { display: none; }

        .category-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(253, 248, 243, 0.95);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            display: flex;
            gap: 8px;
            overflow-x: auto;
            scrollbar-width: none;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        body.admin-mode .category-nav { top: 40px; }
        .category-nav::-webkit-scrollbar { display: none; }

        .nav-btn {
            flex-shrink: 0;
            padding: 9px 18px;
            border: none;
            border-radius: 22px;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: var(--warm-gray);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .nav-btn:hover, .nav-btn.active { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .nav-btn.active { background: var(--dark-brown); color: white; }

        main { max-width: 900px; margin: 0 auto; padding: 35px 20px 120px; }

        .category-section { margin-bottom: 45px; animation: fadeIn 0.5s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--soft-peach);
        }

        .category-icon {
            width: 45px; height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .category-title { font-family: 'Gowun Batang', serif; font-size: 1.25rem; color: var(--dark-brown); }

        .category-count {
            margin-left: auto;
            font-size: 0.8rem;
            color: var(--warm-gray);
            background: white;
            padding: 4px 10px;
            border-radius: 15px;
        }

        .bucket-list { display: flex; flex-direction: column; gap: 10px; }

        .bucket-item {
            background: white;
            border-radius: 14px;
            padding: 15px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .bucket-item::before {
            content: '';
            position: absolute;
            left: 0; top: 0;
            height: 100%; width: 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .bucket-item:hover { transform: translateX(5px); box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .bucket-item:hover::before { opacity: 1; }

        .bucket-item.completed {
            background: linear-gradient(135deg, rgba(168, 197, 168, 0.15) 0%, rgba(255,255,255,0.9) 100%);
        }

        .bucket-item.completed .item-text {
            color: var(--warm-gray);
            text-decoration: line-through;
            text-decoration-color: var(--sage);
        }

        .bucket-item.has-record::after {
            content: 'ğŸ“';
            position: absolute;
            right: 45px;
            font-size: 0.9rem;
        }

        body:not(.admin-mode) .bucket-item { cursor: default; }
        body:not(.admin-mode) .bucket-item:hover { transform: none; }

        .checkbox-wrapper { position: relative; width: 24px; height: 24px; flex-shrink: 0; }

        .checkbox-wrapper input {
            opacity: 0;
            position: absolute;
            width: 100%; height: 100%;
            cursor: pointer;
            z-index: 1;
        }

        body:not(.admin-mode) .checkbox-wrapper input { cursor: default; pointer-events: none; }

        .checkmark {
            position: absolute;
            top: 0; left: 0;
            width: 24px; height: 24px;
            border: 2px solid var(--dusty-rose);
            border-radius: 7px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checkmark::after {
            content: '\2713';
            color: white;
            font-size: 12px;
            opacity: 0;
            transform: scale(0);
            transition: all 0.2s ease;
        }

        .checkbox-wrapper input:checked + .checkmark {
            background: linear-gradient(135deg, var(--sage), var(--dusty-rose));
            border-color: transparent;
        }

        .checkbox-wrapper input:checked + .checkmark::after { opacity: 1; transform: scale(1); }

        .item-text { flex: 1; font-size: 0.9rem; color: var(--dark-brown); transition: all 0.3s ease; }
        .item-emoji { font-size: 1.1rem; opacity: 0.7; }
        .item-arrow { color: var(--warm-gray); opacity: 0; transition: opacity 0.3s ease; font-size: 1.2rem; }

        body.admin-mode .bucket-item:hover .item-arrow { opacity: 1; }

        .category-family .category-icon { background: linear-gradient(135deg, #FFE8D6, #FFCDB2); }
        .category-family .bucket-item::before { background: var(--soft-peach); }

        .category-travel .category-icon { background: linear-gradient(135deg, #B8C5D6, #A0B4C8); }
        .category-travel .bucket-item::before { background: var(--muted-blue); }

        .category-growth .category-icon { background: linear-gradient(135deg, #D4C5E8, #C4B5D8); }
        .category-growth .bucket-item::before { background: var(--lavender); }

        .category-health .category-icon { background: linear-gradient(135deg, #A8C5A8, #98B598); }
        .category-health .bucket-item::before { background: var(--sage); }

        .category-career .category-icon { background: linear-gradient(135deg, #C9A86C, #B9985C); }
        .category-career .bucket-item::before { background: var(--gold); }

        .category-lifestyle .category-icon { background: linear-gradient(135deg, #E8B4B8, #D8A4A8); }
        .category-lifestyle .bucket-item::before { background: var(--dusty-rose); }

        .category-challenge .category-icon { background: linear-gradient(135deg, #E8A598, #D89588); }
        .category-challenge .bucket-item::before { background: var(--coral); }

        .category-experience .category-icon { background: linear-gradient(135deg, #98D4C4, #88C4B4); }
        .category-experience .bucket-item::before { background: var(--mint); }

        .floating-buttons {
            position: fixed;
            bottom: 25px; right: 25px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .floating-btn {
            background: linear-gradient(135deg, var(--dark-brown), #5A5049);
            color: white;
            padding: 14px 22px;
            border-radius: 28px;
            font-size: 0.85rem;
            box-shadow: 0 4px 20px rgba(74, 64, 57, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Nanum Gothic', sans-serif;
        }

        .floating-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 25px rgba(74, 64, 57, 0.4); }
        .floating-btn.add-btn { background: linear-gradient(135deg, var(--dusty-rose), var(--coral)); }
        .floating-btn.admin-only { display: none; }

        body.admin-mode .floating-btn.admin-only { display: flex; }

        .done-count {
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 700;
        }

        .login-modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-modal.active { display: flex; }

        .login-content {
            background: white;
            border-radius: 25px;
            padding: 40px 35px;
            width: 100%;
            max-width: 380px;
            animation: modalIn 0.3s ease;
            text-align: center;
        }

        .login-content h2 { font-family: 'Gowun Batang', serif; font-size: 1.5rem; margin-bottom: 10px; }
        .login-content p { color: var(--warm-gray); font-size: 0.9rem; margin-bottom: 25px; }

        .login-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--soft-peach);
            border-radius: 12px;
            font-size: 1rem;
            text-align: center;
            letter-spacing: 3px;
            transition: all 0.3s ease;
        }

        .login-input:focus { outline: none; border-color: var(--dusty-rose); }
        .login-input.error { border-color: var(--coral); animation: shake 0.5s ease; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .login-error { color: var(--coral); font-size: 0.85rem; margin-top: 10px; display: none; }
        .login-error.show { display: block; }

        .login-buttons { display: flex; gap: 10px; margin-top: 25px; }

        .login-btn {
            flex: 1;
            padding: 14px;
            border-radius: 12px;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .login-btn.cancel { background: var(--cream); color: var(--warm-gray); }
        .login-btn.submit { background: linear-gradient(135deg, var(--dark-brown), #5A5049); color: white; }
        .login-btn:hover { transform: translateY(-2px); }

        .detail-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .detail-overlay.active { display: flex; align-items: flex-start; justify-content: center; }

        .detail-page {
            background: var(--cream);
            border-radius: 25px;
            width: 100%;
            max-width: 550px;
            margin: 20px auto;
            animation: slideUp 0.4s ease;
            overflow: hidden;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .detail-header {
            background: linear-gradient(135deg, var(--soft-peach) 0%, var(--warm-white) 100%);
            padding: 30px 25px;
            position: relative;
        }

        .detail-close {
            position: absolute;
            top: 20px; right: 20px;
            width: 36px; height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.8);
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .detail-close:hover { background: white; transform: scale(1.1); }

        .detail-emoji { font-size: 3rem; margin-bottom: 15px; }

        .detail-title {
            font-family: 'Gowun Batang', serif;
            font-size: 1.4rem;
            color: var(--dark-brown);
            margin-bottom: 8px;
        }

        .detail-category {
            font-size: 0.85rem;
            color: var(--warm-gray);
            display: inline-block;
            background: rgba(255,255,255,0.7);
            padding: 4px 12px;
            border-radius: 15px;
        }

        .detail-content { padding: 25px; }

        .detail-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 18px;
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .status-toggle { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .status-toggle input { display: none; }

        .status-slider {
            width: 50px; height: 28px;
            background: var(--cream);
            border-radius: 14px;
            position: relative;
            transition: all 0.3s ease;
        }

        .status-slider::after {
            content: '';
            position: absolute;
            top: 3px; left: 3px;
            width: 22px; height: 22px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .status-toggle input:checked + .status-slider { background: linear-gradient(135deg, var(--sage), var(--dusty-rose)); }
        .status-toggle input:checked + .status-slider::after { left: 25px; }

        .status-text { font-size: 0.95rem; color: var(--dark-brown); }

        .form-group { margin-bottom: 20px; }

        .form-label {
            display: block;
            font-size: 0.85rem;
            color: var(--warm-gray);
            margin-bottom: 8px;
            font-weight: 700;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid transparent;
            border-radius: 12px;
            background: white;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.9rem;
            color: var(--dark-brown);
            transition: all 0.3s ease;
        }

        .form-input:focus { outline: none; border-color: var(--dusty-rose); }
        .form-textarea { min-height: 120px; resize: vertical; }

        .mood-selector { display: flex; gap: 10px; flex-wrap: wrap; }

        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 12px 15px;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .mood-option:hover { transform: translateY(-2px); }

        .mood-option.selected {
            border-color: var(--dusty-rose);
            background: linear-gradient(135deg, rgba(232, 180, 184, 0.1), white);
        }

        .mood-option input { display: none; }
        .mood-emoji { font-size: 1.8rem; }
        .mood-text { font-size: 0.75rem; color: var(--warm-gray); }

        .image-upload { position: relative; }

        .image-preview {
            width: 100%;
            aspect-ratio: 16/9;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            border: 2px dashed var(--soft-peach);
        }

        .image-preview:hover { border-color: var(--dusty-rose); background: rgba(255,232,214,0.2); }
        .image-preview img { width: 100%; height: 100%; object-fit: cover; }
        .image-preview.has-image { border-style: solid; border-color: transparent; }

        .upload-icon { font-size: 2.5rem; opacity: 0.5; }
        .upload-text { font-size: 0.85rem; color: var(--warm-gray); }
        .image-upload input { display: none; }

        .remove-image {
            position: absolute;
            top: 10px; right: 10px;
            width: 30px; height: 30px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
        }

        .image-preview.has-image + .remove-image { display: flex; align-items: center; justify-content: center; }

        .save-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--dark-brown), #5A5049);
            color: white;
            border: none;
            border-radius: 15px;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .save-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(74, 64, 57, 0.3); }

        .delete-btn {
            width: 100%;
            padding: 14px;
            background: transparent;
            color: var(--coral);
            border: 2px solid var(--coral);
            border-radius: 15px;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .delete-btn:hover { background: var(--coral); color: white; }

        .add-modal, .summary-modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .add-modal.active, .summary-modal.active { display: flex; }

        .add-modal-content, .summary-content {
            background: white;
            border-radius: 25px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            animation: modalIn 0.3s ease;
        }

        .summary-content { max-width: 500px; max-height: 80vh; overflow-y: auto; }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .add-modal h2, .summary-content h2 {
            font-family: 'Gowun Batang', serif;
            font-size: 1.4rem;
            margin-bottom: 25px;
            text-align: center;
        }

        .category-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid transparent;
            border-radius: 12px;
            background: var(--cream);
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.9rem;
            color: var(--dark-brown);
            cursor: pointer;
        }

        .category-select:focus { outline: none; border-color: var(--dusty-rose); }

        .modal-buttons { display: flex; gap: 10px; margin-top: 20px; }

        .modal-btn {
            flex: 1;
            padding: 14px;
            border-radius: 12px;
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.cancel { background: var(--cream); border: none; color: var(--warm-gray); }
        .modal-btn.confirm { background: linear-gradient(135deg, var(--dusty-rose), var(--coral)); border: none; color: white; }
        .modal-btn:hover { transform: translateY(-2px); }

        .completed-list { display: flex; flex-direction: column; gap: 10px; }

        .completed-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: linear-gradient(135deg, rgba(168, 197, 168, 0.2) 0%, rgba(255,255,255,1) 100%);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .completed-item:hover { transform: translateX(5px); }
        .completed-item .check-icon { color: var(--sage); font-size: 1.1rem; }
        .completed-item .item-date { margin-left: auto; font-size: 0.75rem; color: var(--warm-gray); }

        .summary-close {
            display: block;
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            border: none;
            border-radius: 12px;
            background: var(--cream);
            color: var(--dark-brown);
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .summary-close:hover { background: var(--soft-peach); }

        .empty-message { text-align: center; color: var(--warm-gray); padding: 30px; }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--dark-brown);
            color: white;
            padding: 14px 28px;
            border-radius: 30px;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 3000;
        }

        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        .view-mode-notice {
            position: fixed;
            bottom: 25px; left: 25px;
            background: white;
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--warm-gray);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 999;
        }

        body.admin-mode .view-mode-notice { display: none; }

        @media (max-width: 768px) {
            header { padding: 35px 20px 55px; }
            .admin-login-btn { top: 15px; right: 15px; padding: 6px 12px; font-size: 0.75rem; }
            main { padding: 25px 15px 130px; }
            .floating-buttons { bottom: 20px; right: 15px; }
            .floating-btn { padding: 12px 18px; font-size: 0.8rem; }
            .detail-page { margin: 10px; }
            .detail-header { padding: 25px 20px; }
            .detail-content { padding: 20px; }
            .view-mode-notice { bottom: 20px; left: 15px; padding: 10px 15px; font-size: 0.8rem; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 1.7rem; }
            .mood-selector { justify-content: center; }
            .mood-option { padding: 10px 12px; }
            .admin-bar { font-size: 0.75rem; padding: 6px 15px; }
        }
    </style>
</head>
<body>
    <div class="admin-bar" id="adminBar">
        <span>ğŸ” ê´€ë¦¬ì ëª¨ë“œ</span>
        <button class="admin-logout" id="adminLogout">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <p class="loading-text">ë²„í‚·ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>

    <header>
        <button class="admin-login-btn" id="adminLoginBtn">ğŸ” ê´€ë¦¬ì</button>
        <div class="header-content">
            <h1>My Bucket List</h1>
            <p class="subtitle">20ëŒ€ì˜ ë‚˜, 30ëŒ€ì˜ ë‚˜ë¥¼ ìœ„í•œ ê¿ˆ ëª©ë¡</p>
            <div class="progress-container">
                <div class="progress-stats">
                    <span>ë‹¬ì„±ë¥ </span>
                    <span id="progressText">0 / 0 ì™„ë£Œ</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
        </div>
    </header>

    <nav class="category-nav">
        <button class="nav-btn active" data-category="all">ì „ì²´</button>
        <button class="nav-btn" data-category="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡±</button>
        <button class="nav-btn" data-category="travel">âœˆï¸ ì—¬í–‰</button>
        <button class="nav-btn" data-category="growth">ğŸŒ± ì„±ì¥</button>
        <button class="nav-btn" data-category="health">ğŸ’ª ê±´ê°•</button>
        <button class="nav-btn" data-category="career">ğŸ’¼ ì»¤ë¦¬ì–´</button>
        <button class="nav-btn" data-category="lifestyle">ğŸŒ¸ ë¼ì´í”„</button>
        <button class="nav-btn" data-category="challenge">ğŸ”¥ ë„ì „</button>
        <button class="nav-btn" data-category="experience">ğŸª ê²½í—˜</button>
    </nav>

    <main id="mainContent"></main>

    <div class="view-mode-notice">ğŸ‘€ ë³´ê¸° ì „ìš© ëª¨ë“œ</div>

    <div class="floating-buttons">
        <button class="floating-btn add-btn admin-only" id="addBtn">
            <span>â•</span>
            <span>ìƒˆ ë²„í‚·ë¦¬ìŠ¤íŠ¸</span>
        </button>
        <button class="floating-btn" id="summaryBtn">
            <span>ğŸ¯</span>
            <span>ë‹¬ì„± í˜„í™©</span>
            <span class="done-count" id="doneCount">0</span>
        </button>
    </div>

    <div class="login-modal" id="loginModal">
        <div class="login-content">
            <h2>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
            <p>ë²„í‚·ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´<br>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
            <input type="password" class="login-input" id="passwordInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="20">
            <p class="login-error" id="loginError">ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ì–´ìš”!</p>
            <div class="login-buttons">
                <button class="login-btn cancel" id="loginCancel">ì·¨ì†Œ</button>
                <button class="login-btn submit" id="loginSubmit">ë¡œê·¸ì¸</button>
            </div>
        </div>
    </div>

    <div class="detail-overlay" id="detailOverlay">
        <div class="detail-page">
            <div class="detail-header">
                <button class="detail-close" id="detailClose">âœ•</button>
                <div class="detail-emoji" id="detailEmoji">ğŸ¯</div>
                <h2 class="detail-title" id="detailTitle">ë²„í‚·ë¦¬ìŠ¤íŠ¸ ì œëª©</h2>
                <span class="detail-category" id="detailCategory">ì¹´í…Œê³ ë¦¬</span>
            </div>
            <div class="detail-content">
                <div class="detail-status">
                    <label class="status-toggle">
                        <input type="checkbox" id="statusToggle">
                        <span class="status-slider"></span>
                    </label>
                    <span class="status-text" id="statusText">ì•„ì§ ë‹¬ì„±í•˜ì§€ ëª»í–ˆì–´ìš”</span>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ“… ë‹¬ì„±í•œ ë‚ ì§œ</label>
                    <input type="date" class="form-input" id="achieveDate">
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ˜Š ê·¸ë•Œì˜ ê¸°ë¶„</label>
                    <div class="mood-selector" id="moodSelector">
                        <label class="mood-option"><input type="radio" name="mood" value="amazing"><span class="mood-emoji">ğŸ¥³</span><span class="mood-text">ìµœê³ !</span></label>
                        <label class="mood-option"><input type="radio" name="mood" value="happy"><span class="mood-emoji">ğŸ˜Š</span><span class="mood-text">í–‰ë³µí•´</span></label>
                        <label class="mood-option"><input type="radio" name="mood" value="proud"><span class="mood-emoji">ğŸ˜¤</span><span class="mood-text">ë¿Œë“¯í•´</span></label>
                        <label class="mood-option"><input type="radio" name="mood" value="touched"><span class="mood-emoji">ğŸ¥¹</span><span class="mood-text">ê°ë™</span></label>
                        <label class="mood-option"><input type="radio" name="mood" value="peaceful"><span class="mood-emoji">ğŸ˜Œ</span><span class="mood-text">í‰í™”ë¡œì›Œ</span></label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ“¸ ì¶”ì–µ ì‚¬ì§„</label>
                    <div class="image-upload">
                        <label class="image-preview" id="imagePreview">
                            <span class="upload-icon">ğŸ“·</span>
                            <span class="upload-text">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</span>
                            <input type="file" accept="image/*" id="imageInput">
                        </label>
                        <button class="remove-image" id="removeImage">âœ•</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">âœï¸ ì†Œê° & ê¸°ë¡</label>
                    <textarea class="form-input form-textarea" id="reflection" placeholder="ì´ ìˆœê°„ì„ ê¸°ë¡í•´ë³´ì„¸ìš”..."></textarea>
                </div>

                <button class="save-btn" id="saveBtn">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                <button class="delete-btn" id="deleteBtn">ğŸ—‘ï¸ ì´ ë²„í‚·ë¦¬ìŠ¤íŠ¸ ì‚­ì œ</button>
            </div>
        </div>
    </div>

    <div class="add-modal" id="addModal">
        <div class="add-modal-content">
            <h2>âœ¨ ìƒˆë¡œìš´ ë²„í‚·ë¦¬ìŠ¤íŠ¸</h2>
            <div class="form-group">
                <label class="form-label">ë²„í‚·ë¦¬ìŠ¤íŠ¸ ì œëª©</label>
                <input type="text" class="form-input" id="newTitle" placeholder="ì´ë£¨ê³  ì‹¶ì€ ê¿ˆì„ ì ì–´ì£¼ì„¸ìš”">
            </div>
            <div class="form-group">
                <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
                <select class="category-select" id="newCategory">
                    <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡± & ê´€ê³„</option>
                    <option value="travel">âœˆï¸ ì—¬í–‰ & ê²½í—˜</option>
                    <option value="growth">ğŸŒ± ìê¸°ê³„ë°œ & ì„±ì¥</option>
                    <option value="health">ğŸ’ª ê±´ê°• & ë·°í‹°</option>
                    <option value="career">ğŸ’¼ ì»¤ë¦¬ì–´ & ì¬ì •</option>
                    <option value="lifestyle">ğŸŒ¸ ë¼ì´í”„ìŠ¤íƒ€ì¼</option>
                    <option value="challenge">ğŸ”¥ ë„ì „ & ëª¨í—˜</option>
                    <option value="experience">ğŸª íŠ¹ë³„í•œ ê²½í—˜</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">ì´ëª¨ì§€ ì„ íƒ</label>
                <input type="text" class="form-input" id="newEmoji" placeholder="ğŸ¯" maxlength="2">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelAdd">ì·¨ì†Œ</button>
                <button class="modal-btn confirm" id="confirmAdd">ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <div class="summary-modal" id="summaryModal">
        <div class="summary-content">
            <h2>ğŸ‰ ë‹¬ì„±í•œ ë²„í‚·ë¦¬ìŠ¤íŠ¸</h2>
            <div class="completed-list" id="completedList">
                <p class="empty-message">ì•„ì§ ë‹¬ì„±í•œ í•­ëª©ì´ ì—†ì–´ìš”!</p>
            </div>
            <button class="summary-close" id="summaryClose">ë‹«ê¸°</button>
        </div>
    </div>

    <div class="toast" id="toast">ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, doc, getDocs, addDoc, updateDoc, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD1ejHqiPLHaGE0O2blxH4SwrmWHwqGsjU",
            authDomain: "bucket-list-2026-5029d.firebaseapp.com",
            projectId: "bucket-list-2026-5029d",
            storageBucket: "bucket-list-2026-5029d.firebasestorage.app",
            messagingSenderId: "447411500336",
            appId: "1:447411500336:web:5de5b7d9b930b2a447c4f5",
            measurementId: "G-GWLZPQMLJ5"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        const ADMIN_PASSWORD = 'zzzacs1';
        let isAdminMode = false;

        const categories = {
            family: { name: 'ê°€ì¡± & ê´€ê³„', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§' },
            travel: { name: 'ì—¬í–‰ & ê²½í—˜', icon: 'âœˆï¸' },
            growth: { name: 'ìê¸°ê³„ë°œ & ì„±ì¥', icon: 'ğŸŒ±' },
            health: { name: 'ê±´ê°• & ë·°í‹°', icon: 'ğŸ’ª' },
            career: { name: 'ì»¤ë¦¬ì–´ & ì¬ì •', icon: 'ğŸ’¼' },
            lifestyle: { name: 'ë¼ì´í”„ìŠ¤íƒ€ì¼', icon: 'ğŸŒ¸' },
            challenge: { name: 'ë„ì „ & ëª¨í—˜', icon: 'ğŸ”¥' },
            experience: { name: 'íŠ¹ë³„í•œ ê²½í—˜', icon: 'ğŸª' }
        };

        const initialBuckets = [
            { title: 'ê°€ì¡±ì‚¬ì§„ ì°ê¸°', category: 'family', emoji: 'ğŸ“¸', completed: false },
            { title: 'ê²°í˜¼í•˜ê¸°', category: 'family', emoji: 'ğŸ’', completed: false },
            { title: 'ì•„ì´ ê°€ì§€ê¸°', category: 'family', emoji: 'ğŸ‘¶', completed: false },
            { title: 'ì—„ë§ˆë‘ ê°™ì´ í•´ì™¸ì—¬í–‰ ê°€ê¸°', category: 'family', emoji: 'ğŸ’•', completed: false },
            { title: 'ì¢‹ì€ ì‚¬ëŒ ë§Œë‚˜ì„œ ì—°ì• í•˜ê¸°', category: 'family', emoji: 'ğŸ’—', completed: false },
            { title: 'ë¶€ëª¨ë‹˜ê»˜ íš¨ë„ ì—¬í–‰ ì„ ë¬¼í•˜ê¸°', category: 'family', emoji: 'ğŸ', completed: false },
            { title: 'ê°€ì¡±ê³¼ í•¨ê»˜ ìº í•‘ê°€ê¸°', category: 'family', emoji: 'â›º', completed: false },
            { title: 'í•´ì™¸ì—¬í–‰ ê°€ê¸° (ì„¸ì„¸í•œ ê³„íš ì„¸ì›Œì„œ)', category: 'travel', emoji: 'ğŸ—ºï¸', completed: false },
            { title: 'ì²« í•´ì™¸ì—¬í–‰ì„ í˜¼ì ê°€ë³´ê¸°', category: 'travel', emoji: 'ğŸ§³', completed: false },
            { title: 'ì¢‹ì•„í•˜ëŠ” ê°€ìˆ˜ ì½˜ì„œíŠ¸ ê°€ê¸° (ì´ìŠ¹í™˜)', category: 'travel', emoji: 'ğŸ¤', completed: false },
            { title: 'ì˜¤ë¡œë¼ ë³´ëŸ¬ ë¶ìœ ëŸ½ ê°€ê¸°', category: 'travel', emoji: 'ğŸŒŒ', completed: false },
            { title: 'ì¼ë³¸ ë²šê½ƒ ì‹œì¦Œì— ì—¬í–‰ê°€ê¸°', category: 'travel', emoji: 'ğŸŒ¸', completed: false },
            { title: 'ìœ ëŸ½ ë°°ë‚­ì—¬í–‰ í•˜ê¸°', category: 'travel', emoji: 'ğŸ’', completed: false },
            { title: 'ì œì£¼ë„ í•œ ë‹¬ ì‚´ê¸°', category: 'travel', emoji: 'ğŸï¸', completed: false },
            { title: 'ë‰´ìš• íƒ€ì„ìŠ¤í€˜ì–´ì—ì„œ ìƒˆí•´ë§ì´í•˜ê¸°', category: 'travel', emoji: 'ğŸ—½', completed: false },
            { title: 'ë¬´ì–¸ê°€ ë°°ìš°ê¸° (ì–¸ì–´, ì•…ê¸°, ìš´ë™, ì·¨ë¯¸ìƒí™œ)', category: 'growth', emoji: 'ğŸ“š', completed: false },
            { title: 'ìì•„ì„±ì°°í•˜ëŠ” ì‹œê°„ ê°€ì§€ê¸°', category: 'growth', emoji: 'ğŸª·', completed: false },
            { title: 'ë‚´ê°€ ì •ë§ ì¢‹ì•„í•˜ëŠ” ì±… ìŒì„± ë‚­ë…í•˜ê¸°', category: 'growth', emoji: 'ğŸ™ï¸', completed: false },
            { title: 'ë‚´ê°€ ì •ë§ ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ ìŒì„± ë…¹ìŒí•˜ê¸°', category: 'growth', emoji: 'ğŸµ', completed: false },
            { title: 'ë¹„ì£¼ì–¼ ë…¸ë²¨ ê²Œì„ ì œì‘í•˜ê¸°', category: 'growth', emoji: 'ğŸ®', completed: false },
            { title: 'ì‹¬ë¦¬ ìƒë‹´ ë°›ì•„ë³´ê¸°', category: 'growth', emoji: 'ğŸ’­', completed: false },
            { title: 'ë‚˜ë§Œì˜ íë§ë°©ë²•, ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ ë°©ë²• ì°¾ê¸°', category: 'growth', emoji: 'ğŸ§˜', completed: false },
            { title: 'ì„±ì ìš°ìˆ˜ë¡œ ëŒ€í•™êµ ì¥í•™ê¸ˆ ë°›ê¸°', category: 'growth', emoji: 'ğŸ“', completed: false },
            { title: 'ì™¸êµ­ì–´ í•˜ë‚˜ ìœ ì°½í•˜ê²Œ í•˜ê¸°', category: 'growth', emoji: 'ğŸ—£ï¸', completed: false },
            { title: 'ì±… 100ê¶Œ ì½ê¸°', category: 'growth', emoji: 'ğŸ“–', completed: false },
            { title: 'ì˜¨ë¼ì¸ ê°•ì˜ë¡œ ìƒˆë¡œìš´ ìŠ¤í‚¬ ë°°ìš°ê¸°', category: 'growth', emoji: 'ğŸ’»', completed: false },
            { title: 'ëª…ìƒ 30ì¼ ì±Œë¦°ì§€ ì™„ë£Œí•˜ê¸°', category: 'growth', emoji: 'ğŸ§ ', completed: false },
            { title: 'ì¸ë°”ë”” ì ìˆ˜ 80ì  ì°ê¸°', category: 'health', emoji: 'âš¡', completed: false },
            { title: 'ì²œêµ­ì˜ ê³„ë‹¨ 1ì‹œê°„ ê±°ëœ¬íˆ íƒ€ê¸°', category: 'health', emoji: 'ğŸƒâ€â™€ï¸', completed: false },
            { title: 'í”¼ë¶€ê´€ë¦¬ë¡œ í”¼ë¶€ì¢‹ì•„ë³´ì¸ë‹¤ ì†Œë¦¬ ë“£ê¸°', category: 'health', emoji: 'âœ¨', completed: false },
            { title: 'ì¼ì£¼ì¼ì— í•œ ë²ˆ SNS ë””í†¡ìŠ¤', category: 'health', emoji: 'ğŸ“µ', completed: false },
            { title: 'ë§ˆë¼í†¤ ì™„ì£¼í•˜ê¸°', category: 'health', emoji: 'ğŸ…', completed: false },
            { title: 'ìš”ê°€ 1ë…„ ê¾¸ì¤€íˆ í•˜ê¸°', category: 'health', emoji: 'ğŸ§˜â€â™€ï¸', completed: false },
            { title: 'ì²´ì¤‘ ëª©í‘œ ë‹¬ì„±í•˜ê¸°', category: 'health', emoji: 'âš–ï¸', completed: false },
            { title: 'ë§¤ì¼ ì•„ì¹¨ ìš´ë™ ìŠµê´€ ë§Œë“¤ê¸°', category: 'health', emoji: 'ğŸŒ…', completed: false },
            { title: 'ì „ì„¸ì§‘ êµ¬í•´ì„œ í˜¼ì ìì·¨í•˜ê¸°', category: 'career', emoji: 'ğŸ ', completed: false },
            { title: 'ëª©í‘œ ê¸ˆì•¡ ëª¨ìœ¼ê¸°', category: 'career', emoji: 'ğŸ’°', completed: false },
            { title: 'í”„ë¦¬ëœì„œ ìƒí™œ 1ë…„ í•´ë³´ê¸°', category: 'career', emoji: 'ğŸ’»', completed: false },
            { title: 'ë‚˜ë§Œì˜ ë¶€ìˆ˜ì… íŒŒì´í”„ë¼ì¸ ë§Œë“¤ê¸°', category: 'career', emoji: 'ğŸ“ˆ', completed: false },
            { title: 'ì¸ìŠ¤íƒ€ íŒ”ë¡œì›Œ 3ì²œëª… ë§Œë“¤ê¸°', category: 'career', emoji: 'ğŸ“±', completed: false },
            { title: 'ë‚˜ì˜ í™ˆí˜ì´ì§€ ë§Œë“¤ê¸°', category: 'career', emoji: 'ğŸŒ', completed: false },
            { title: 'í”„ë¦¬ëœì„œ ëª…í•¨ ë§Œë“¤ê³  í™œë™í•˜ê¸°', category: 'career', emoji: 'ğŸ“‡', completed: false },
            { title: 'ì›í•˜ëŠ” íšŒì‚¬ì— ì·¨ì§í•˜ê¸°', category: 'career', emoji: 'ğŸ¢', completed: false },
            { title: 'ì£¼ì‹ íˆ¬ì ì‹œì‘í•˜ê¸°', category: 'career', emoji: 'ğŸ“Š', completed: false },
            { title: 'ë‚˜ë§Œì˜ ë¸Œëœë“œ ëŸ°ì¹­í•˜ê¸°', category: 'career', emoji: 'ğŸš€', completed: false },
            { title: 'ì˜ ì–´ìš¸ë¦¬ëŠ” ìŠ¤íƒ€ì¼ ì°¾ê¸°', category: 'lifestyle', emoji: 'ğŸ‘—', completed: false },
            { title: 'í”„ë¡œí•„ ì´¬ì˜í•˜ê¸°', category: 'lifestyle', emoji: 'ğŸ“·', completed: false },
            { title: 'ë°ì¼ë¦¬ë£© ì±Œë¦°ì§€ (ë§¤ì¼ ë‹¤ë¥¸ ì½”ë”” 30ì¼)', category: 'lifestyle', emoji: 'ğŸ‘š', completed: false },
            { title: 'ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” í–¥ ì°¾ê¸°', category: 'lifestyle', emoji: 'ğŸŒº', completed: false },
            { title: 'ë°© ì¸í…Œë¦¬ì–´ ê¾¸ë¯¸ê¸°', category: 'lifestyle', emoji: 'ğŸ›‹ï¸', completed: false },
            { title: 'ë¯¸ë‹ˆë©€ ë¼ì´í”„ ì‹¤ì²œí•˜ê¸°', category: 'lifestyle', emoji: 'ğŸª´', completed: false },
            { title: 'ë‚˜ë§Œì˜ ë£¨í‹´ ë§Œë“¤ê¸°', category: 'lifestyle', emoji: 'â°', completed: false },
            { title: 'ë°˜ë ¤ì‹ë¬¼ 1ë…„ ì˜ í‚¤ìš°ê¸°', category: 'lifestyle', emoji: 'ğŸŒ¿', completed: false },
            { title: 'ìŠ¤ì¹´ì´ë‹¤ì´ë¹™ í•´ë³´ê¸°', category: 'challenge', emoji: 'ğŸª‚', completed: false },
            { title: 'ë²ˆì§€ì í”„ ë„ì „í•˜ê¸°', category: 'challenge', emoji: 'ğŸƒ', completed: false },
            { title: 'ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™ ìê²©ì¦ ë”°ê¸°', category: 'challenge', emoji: 'ğŸ¤¿', completed: false },
            { title: 'ìº í•‘ì¹´ ì—¬í–‰í•˜ê¸°', category: 'challenge', emoji: 'ğŸš', completed: false },
            { title: 'ìƒˆë²½ ì‚° ì •ìƒì—ì„œ ì¼ì¶œ ë³´ê¸°', category: 'challenge', emoji: 'ğŸŒ„', completed: false },
            { title: '24ì‹œê°„ ì¹´í˜ ì‘ì—… ì±Œë¦°ì§€', category: 'challenge', emoji: 'â˜•', completed: false },
            { title: 'í˜¼ì ì˜í™”ê´€ ê°€ê¸°', category: 'challenge', emoji: 'ğŸ¬', completed: false },
            { title: 'ë¬´ì„œìš´ ê±° ë„ì „í•˜ê¸° (ë†€ì´ê¸°êµ¬, ê³µí¬ì²´í—˜ ë“±)', category: 'challenge', emoji: 'ğŸ‘»', completed: false },
            { title: 'ë¯¸ìŠë­ ë ˆìŠ¤í† ë‘ ê°€ë³´ê¸°', category: 'experience', emoji: 'ğŸ½ï¸', completed: false },
            { title: 'í˜ìŠ¤í‹°ë²Œ ê°€ë³´ê¸°', category: 'experience', emoji: 'ğŸª', completed: false },
            { title: 'ë®¤ì§€ì»¬ ë³´ëŸ¬ê°€ê¸°', category: 'experience', emoji: 'ğŸ­', completed: false },
            { title: 'í•«í”Œ ì¹´í˜ 10ê³³ íˆ¬ì–´í•˜ê¸°', category: 'experience', emoji: 'â˜•', completed: false },
            { title: 'ë³„ë˜¥ë³„ ë³´ê¸°', category: 'experience', emoji: 'ğŸŒ ', completed: false },
            { title: 'í”„ë¡œí¬ì¦ˆ ë°›ê¸° / í•˜ê¸°', category: 'experience', emoji: 'ğŸ’', completed: false },
            { title: 'ê¹œì§ ìƒì¼íŒŒí‹° ì—´ì–´ì£¼ê¸°', category: 'experience', emoji: 'ğŸ‚', completed: false },
            { title: 'ìœˆí„°ìŠ¤í¬ì¸  ë°°ìš°ê¸° (ìŠ¤í‚¤/ë³´ë“œ)', category: 'experience', emoji: 'ğŸ¿', completed: false }
        ];

        let buckets = [];
        let currentBucketId = null;
        let currentImageFile = null;

        const loadingScreen = document.getElementById('loadingScreen');
        const mainContent = document.getElementById('mainContent');
        const detailOverlay = document.getElementById('detailOverlay');
        const addModal = document.getElementById('addModal');
        const summaryModal = document.getElementById('summaryModal');
        const loginModal = document.getElementById('loginModal');
        const toast = document.getElementById('toast');
        const adminBar = document.getElementById('adminBar');
        const adminLoginBtn = document.getElementById('adminLoginBtn');

        function checkAdminMode() {
            const savedAdminMode = sessionStorage.getItem('bucketListAdminMode');
            if (savedAdminMode === 'true') enableAdminMode();
        }

        function enableAdminMode() {
            isAdminMode = true;
            document.body.classList.add('admin-mode');
            adminBar.classList.add('active');
            adminLoginBtn.classList.add('logged-in');
            sessionStorage.setItem('bucketListAdminMode', 'true');
        }

        function disableAdminMode() {
            isAdminMode = false;
            document.body.classList.remove('admin-mode');
            adminBar.classList.remove('active');
            adminLoginBtn.classList.remove('logged-in');
            sessionStorage.removeItem('bucketListAdminMode');
        }

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2500);
        }

        async function loadBuckets() {
            try {
                const q = query(collection(db, 'buckets'), orderBy('createdAt', 'asc'));
                const querySnapshot = await getDocs(q);
                
                if (querySnapshot.empty) {
                    for (const bucket of initialBuckets) {
                        await addDoc(collection(db, 'buckets'), {
                            ...bucket,
                            createdAt: new Date(),
                            achieveDate: null,
                            mood: null,
                            imageUrl: null,
                            reflection: null
                        });
                    }
                    return loadBuckets();
                }

                buckets = [];
                querySnapshot.forEach((doc) => {
                    buckets.push({ id: doc.id, ...doc.data() });
                });

                renderBuckets();
                updateProgress();
                loadingScreen.classList.add('hidden');
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                showToast('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
                loadingScreen.classList.add('hidden');
            }
        }

        function renderBuckets() {
            const grouped = {};
            buckets.forEach(bucket => {
                if (!grouped[bucket.category]) grouped[bucket.category] = [];
                grouped[bucket.category].push(bucket);
            });

            let html = '';
            Object.keys(categories).forEach(cat => {
                if (grouped[cat] && grouped[cat].length > 0) {
                    const items = grouped[cat];
                    const completed = items.filter(b => b.completed).length;
                    
                    html += '<section class="category-section category-' + cat + '" data-category="' + cat + '">' +
                        '<div class="category-header">' +
                        '<div class="category-icon">' + categories[cat].icon + '</div>' +
                        '<h2 class="category-title">' + categories[cat].name + '</h2>' +
                        '<span class="category-count">' + completed + '/' + items.length + '</span>' +
                        '</div><div class="bucket-list">';
                    
                    items.forEach(item => {
                        html += '<div class="bucket-item ' + (item.completed ? 'completed' : '') + ' ' + 
                            (item.reflection || item.imageUrl ? 'has-record' : '') + '" data-id="' + item.id + '">' +
                            '<label class="checkbox-wrapper" onclick="event.stopPropagation()">' +
                            '<input type="checkbox" ' + (item.completed ? 'checked' : '') + 
                            ' onchange="window.toggleComplete(\'' + item.id + '\', this.checked, event)">' +
                            '<span class="checkmark"></span></label>' +
                            '<span class="item-text">' + item.title + '</span>' +
                            '<span class="item-emoji">' + item.emoji + '</span>' +
                            '<span class="item-arrow">â€º</span></div>';
                    });
                    
                    html += '</div></section>';
                }
            });

            mainContent.innerHTML = html;

            document.querySelectorAll('.bucket-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (!e.target.closest('.checkbox-wrapper')) {
                        if (isAdminMode) {
                            openDetail(item.dataset.id);
                        } else {
                            showToast('ğŸ” ìˆ˜ì •í•˜ë ¤ë©´ ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”');
                        }
                    }
                });
            });
        }

        window.toggleComplete = async function(id, completed, event) {
            if (!isAdminMode) {
                event.preventDefault();
                event.target.checked = !completed;
                showToast('ğŸ” ìˆ˜ì •í•˜ë ¤ë©´ ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”');
                return;
            }

            try {
                await updateDoc(doc(db, 'buckets', id), { completed });
                const bucket = buckets.find(b => b.id === id);
                if (bucket) {
                    bucket.completed = completed;
                    if (completed && !bucket.achieveDate) {
                        bucket.achieveDate = new Date().toISOString().split('T')[0];
                        await updateDoc(doc(db, 'buckets', id), { achieveDate: bucket.achieveDate });
                    }
                }
                renderBuckets();
                updateProgress();
                showToast(completed ? 'ğŸ‰ ì¶•í•˜í•´ìš”!' : 'ë‹¤ìŒì— ë‹¤ì‹œ ë„ì „í•´ìš”!');
            } catch (error) {
                console.error('ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
                showToast('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
            }
        };

        function updateProgress() {
            const total = buckets.length;
            const completed = buckets.filter(b => b.completed).length;
            const percentage = total > 0 ? (completed / total) * 100 : 0;

            document.getElementById('progressText').textContent = completed + ' / ' + total + ' ì™„ë£Œ';
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('doneCount').textContent = completed;
        }

        function openDetail(id) {
            const bucket = buckets.find(b => b.id === id);
            if (!bucket) return;

            currentBucketId = id;
            currentImageFile = null;

            document.getElementById('detailEmoji').textContent = bucket.emoji;
            document.getElementById('detailTitle').textContent = bucket.title;
            document.getElementById('detailCategory').textContent = categories[bucket.category].icon + ' ' + categories[bucket.category].name;
            
            document.getElementById('statusToggle').checked = bucket.completed;
            document.getElementById('statusText').textContent = bucket.completed ? 'ë‹¬ì„±í–ˆì–´ìš”! ğŸ‰' : 'ì•„ì§ ë‹¬ì„±í•˜ì§€ ëª»í–ˆì–´ìš”';
            
            document.getElementById('achieveDate').value = bucket.achieveDate || '';
            document.getElementById('reflection').value = bucket.reflection || '';

            document.querySelectorAll('.mood-option').forEach(opt => {
                opt.classList.remove('selected');
                const input = opt.querySelector('input');
                input.checked = input.value === bucket.mood;
                if (input.checked) opt.classList.add('selected');
            });

            const preview = document.getElementById('imagePreview');
            if (bucket.imageUrl) {
                preview.innerHTML = '<img src="' + bucket.imageUrl + '" alt="ì¶”ì–µ ì‚¬ì§„">';
                preview.classList.add('has-image');
            } else {
                preview.innerHTML = '<span class="upload-icon">ğŸ“·</span><span class="upload-text">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</span><input type="file" accept="image/*" id="imageInput">';
                preview.classList.remove('has-image');
                setupImageInput();
            }

            detailOverlay.classList.add('active');
        }

        function setupImageInput() {
            const input = document.getElementById('imageInput');
            if (input) input.addEventListener('change', handleImageSelect);
        }

        function handleImageSelect(e) {
            const file = e.target.files[0];
            if (file) {
                currentImageFile = file;
                const reader = new FileReader();
                reader.onload = (e) => {
                    const preview = document.getElementById('imagePreview');
                    preview.innerHTML = '<img src="' + e.target.result + '" alt="ì¶”ì–µ ì‚¬ì§„">';
                    preview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        }

        async function uploadImage(file, bucketId) {
            const storageRef = ref(storage, 'bucket-images/' + bucketId + '/' + Date.now() + '_' + file.name);
            await uploadBytes(storageRef, file);
            return getDownloadURL(storageRef);
        }

        document.getElementById('saveBtn').addEventListener('click', async () => {
            if (!currentBucketId) return;

            try {
                const completed = document.getElementById('statusToggle').checked;
                const achieveDate = document.getElementById('achieveDate').value || null;
                const reflection = document.getElementById('reflection').value || null;
                const moodInput = document.querySelector('input[name="mood"]:checked');
                const mood = moodInput ? moodInput.value : null;

                let imageUrl = buckets.find(b => b.id === currentBucketId)?.imageUrl || null;

                if (currentImageFile) {
                    imageUrl = await uploadImage(currentImageFile, currentBucketId);
                }

                await updateDoc(doc(db, 'buckets', currentBucketId), {
                    completed, achieveDate, reflection, mood, imageUrl
                });

                const bucket = buckets.find(b => b.id === currentBucketId);
                if (bucket) Object.assign(bucket, { completed, achieveDate, reflection, mood, imageUrl });

                renderBuckets();
                updateProgress();
                detailOverlay.classList.remove('active');
                showToast('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! âœ¨');
            } catch (error) {
                console.error('ì €ì¥ ì‹¤íŒ¨:', error);
                showToast('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
            }
        });

        document.getElementById('deleteBtn').addEventListener('click', async () => {
            if (!currentBucketId) return;
            
            if (confirm('ì •ë§ ì´ ë²„í‚·ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚­ì œí• ê¹Œìš”?')) {
                try {
                    await deleteDoc(doc(db, 'buckets', currentBucketId));
                    buckets = buckets.filter(b => b.id !== currentBucketId);
                    renderBuckets();
                    updateProgress();
                    detailOverlay.classList.remove('active');
                    showToast('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
                } catch (error) {
                    console.error('ì‚­ì œ ì‹¤íŒ¨:', error);
                    showToast('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
                }
            }
        });

        document.getElementById('statusToggle').addEventListener('change', function() {
            document.getElementById('statusText').textContent = this.checked ? 'ë‹¬ì„±í–ˆì–´ìš”! ğŸ‰' : 'ì•„ì§ ë‹¬ì„±í•˜ì§€ ëª»í–ˆì–´ìš”';
        });

        document.querySelectorAll('.mood-option').forEach(opt => {
            opt.addEventListener('click', () => {
                document.querySelectorAll('.mood-option').forEach(o => o.classList.remove('selected'));
                opt.classList.add('selected');
            });
        });

        document.getElementById('removeImage').addEventListener('click', () => {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '<span class="upload-icon">ğŸ“·</span><span class="upload-text">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</span><input type="file" accept="image/*" id="imageInput">';
            preview.classList.remove('has-image');
            currentImageFile = null;
            setupImageInput();
        });

        document.getElementById('detailClose').addEventListener('click', () => {
            detailOverlay.classList.remove('active');
        });

        detailOverlay.addEventListener('click', (e) => {
            if (e.target === detailOverlay) detailOverlay.classList.remove('active');
        });

        document.getElementById('addBtn').addEventListener('click', () => {
            if (!isAdminMode) {
                showToast('ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”');
                return;
            }
            document.getElementById('newTitle').value = '';
            document.getElementById('newEmoji').value = 'ğŸ¯';
            addModal.classList.add('active');
        });

        document.getElementById('cancelAdd').addEventListener('click', () => {
            addModal.classList.remove('active');
        });

        document.getElementById('confirmAdd').addEventListener('click', async () => {
            const title = document.getElementById('newTitle').value.trim();
            const category = document.getElementById('newCategory').value;
            const emoji = document.getElementById('newEmoji').value || 'ğŸ¯';

            if (!title) {
                showToast('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            try {
                const docRef = await addDoc(collection(db, 'buckets'), {
                    title, category, emoji,
                    completed: false,
                    createdAt: new Date(),
                    achieveDate: null,
                    mood: null,
                    imageUrl: null,
                    reflection: null
                });

                buckets.push({ id: docRef.id, title, category, emoji, completed: false });
                renderBuckets();
                updateProgress();
                addModal.classList.remove('active');
                showToast('ìƒˆ ë²„í‚·ë¦¬ìŠ¤íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! âœ¨');
            } catch (error) {
                console.error('ì¶”ê°€ ì‹¤íŒ¨:', error);
                showToast('ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
            }
        });

        addModal.addEventListener('click', (e) => {
            if (e.target === addModal) addModal.classList.remove('active');
        });

        document.getElementById('summaryBtn').addEventListener('click', () => {
            const completed = buckets.filter(b => b.completed);
            const list = document.getElementById('completedList');

            if (completed.length === 0) {
                list.innerHTML = '<p class="empty-message">ì•„ì§ ë‹¬ì„±í•œ í•­ëª©ì´ ì—†ì–´ìš”!<br>í•˜ë‚˜ì”© ì²´í¬í•´ë³´ì„¸ìš” âœ¨</p>';
            } else {
                list.innerHTML = completed.map(item => 
                    '<div class="completed-item" onclick="window.openDetailFromSummary(\'' + item.id + '\')">' +
                    '<span class="check-icon">âœ“</span><span>' + item.title + '</span><span>' + item.emoji + '</span>' +
                    (item.achieveDate ? '<span class="item-date">' + item.achieveDate + '</span>' : '') +
                    '</div>'
                ).join('');
            }

            summaryModal.classList.add('active');
        });

        window.openDetailFromSummary = function(id) {
            if (!isAdminMode) {
                showToast('ğŸ” ìƒì„¸ë³´ê¸°ëŠ” ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”');
                return;
            }
            summaryModal.classList.remove('active');
            openDetail(id);
        };

        document.getElementById('summaryClose').addEventListener('click', () => {
            summaryModal.classList.remove('active');
        });

        summaryModal.addEventListener('click', (e) => {
            if (e.target === summaryModal) summaryModal.classList.remove('active');
        });

        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                const category = this.dataset.category;
                document.querySelectorAll('.category-section').forEach(section => {
                    if (category === 'all' || section.dataset.category === category) {
                        section.style.display = 'block';
                        section.style.animation = 'fadeIn 0.4s ease';
                    } else {
                        section.style.display = 'none';
                    }
                });
            });
        });

        document.getElementById('imagePreview').addEventListener('click', () => {
            const input = document.getElementById('imageInput');
            if (input) input.click();
        });

        adminLoginBtn.addEventListener('click', () => {
            document.getElementById('passwordInput').value = '';
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('passwordInput').classList.remove('error');
            loginModal.classList.add('active');
            setTimeout(() => document.getElementById('passwordInput').focus(), 100);
        });

        document.getElementById('loginCancel').addEventListener('click', () => {
            loginModal.classList.remove('active');
        });

        document.getElementById('loginSubmit').addEventListener('click', () => {
            const password = document.getElementById('passwordInput').value;
            if (password === ADMIN_PASSWORD) {
                loginModal.classList.remove('active');
                enableAdminMode();
                showToast('ğŸ”“ ê´€ë¦¬ì ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤');
            } else {
                document.getElementById('loginError').classList.add('show');
                document.getElementById('passwordInput').classList.add('error');
                setTimeout(() => document.getElementById('passwordInput').classList.remove('error'), 500);
            }
        });

        document.getElementById('passwordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') document.getElementById('loginSubmit').click();
        });

        loginModal.addEventListener('click', (e) => {
            if (e.target === loginModal) loginModal.classList.remove('active');
        });

        document.getElementById('adminLogout').addEventListener('click', () => {
            disableAdminMode();
            showToast('ğŸ‘€ ë³´ê¸° ì „ìš© ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤');
        });

        checkAdminMode();
        loadBuckets();
    </script>
</body>
</html>
